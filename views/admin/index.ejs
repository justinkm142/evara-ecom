<!DOCTYPE HTML>
<html lang="en">

    <%- include('../partials/adminHead.ejs') %>


    <!-- date picker css -->

    <!-- <link href="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet"> -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/css/datepicker.min.css" rel="stylesheet">




<body>
    
    <%- include('../partials/adminNav.ejs') %>


    
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Dashboard </h2>
                    <p>Whole data about your business here</p>
                </div>
                <!-- <div>
                    <a href="#" class="btn btn-primary"><i class="text-muted material-icons md-post_add"></i>Create report</a>
                </div> -->
            </div>
            <div class="row">
                <div class="col-lg-4">
                    <div class="card card-body mb-4" >
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-primary-light"><i class="text-primary material-icons md-monetization_on"></i></span>
                            <div class="text" >
                                <h6 class="mb-1 card-title">Revenue</h6>
                                <div style="display: flex;">
                                <span>₹  </span>
                                <span id="totalRevenue1" class="ms-1"> </span>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-success-light"><i class="text-success material-icons md-local_shipping"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Orders</h6> <span id="totalOrder">53.668</span>
                                <span class="text-sm">
                
                                </span>
                            </div>
                        </article>
                    </div>
                </div>
                <!-- <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-warning-light"><i class="text-warning material-icons md-qr_code"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Products</h6> <span>9.856</span>
                                <span class="text-sm">
                                    In 19 Categories
                                </span>
                            </div>
                        </article>
                    </div>
                </div> -->
                <!-- <div class="col-lg-3">
                    <div class="card card-body mb-4">
                        <article class="icontext">
                            <span class="icon icon-sm rounded-circle bg-info-light"><i class="text-info material-icons md-shopping_basket"></i></span>
                            <div class="text">
                                <h6 class="mb-1 card-title">Monthly Earning</h6> <span>$6,982</span>
                                <span class="text-sm">
                                    Based in your local time.
                                </span>
                            </div>
                        </article>
                    </div>
                </div> -->
            </div>
            <div class="row">
                <div class="col-xl-6 col-lg-10">
                    <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Sale statistics</h5>
                            <canvas id="myChart" height="120px"></canvas>
                        </article>
                    </div>
                    
                    <div class="row">
                       
                    </div>
                </div>
                <div class="col-xl-6 col-lg-2">
                    
                    <!-- <div class="card mb-4">
                        <article class="card-body">
                           
                            <div id="donutchart" style="width: 600px; height: 220px;"></div> 
                        </article>
                    </div> -->
                    <div class="row">
                        
                       
                    </div>
                </div>


                <!-- <div class="col-xl-4 col-lg-12">
                    
                    <div class="card mb-4">
                        <article class="card-body">
                            <h5 class="card-title">Marketing Chanel</h5>
                            <span class="text-muted font-xs">Facebook</span>
                            <div class="progress mb-3">
                                <div class="progress-bar" role="progressbar" style="width: 15%">15%</div>
                            </div>
                            <span class="text-muted font-xs">Instagram</span>
                            <div class="progress mb-3">
                                <div class="progress-bar" role="progressbar" style="width: 65%">65% </div>
                            </div>
                            <span class="text-muted font-xs">Google</span>
                            <div class="progress mb-3">
                                <div class="progress-bar" role="progressbar" style="width: 51%"> 51% </div>
                            </div>
                            <span class="text-muted font-xs">Twitter</span>
                            <div class="progress mb-3">
                                <div class="progress-bar" role="progressbar" style="width: 80%"> 80%</div>
                            </div>
                            <span class="text-muted font-xs">Other</span>
                            <div class="progress mb-3">
                                <div class="progress-bar" role="progressbar" style="width: 80%"> 80%</div>
                            </div>
                        </article>
                    </div>
                </div> -->
            </div>
            <div class="card mb-4">
                <header class="card-header">
    
                    <div class="row align-items-center">
                        <div class="col-md-4 col-4">

                            <h4 class="card-title"><%=title%></h4>

                        </div>
                        <div class="col-md-3 col-4 me-auto mb-md-0 mb-3" >
                            <div class="custom_select">
                                <select class="form-select select-nice" onchange="reportMaker()" id="filterOption">
                                    <option selected>Today orders</option>
                                    <option>Date Wise</option>
                                    <option>Month Wise</option>
                                    <option>Date Filter</option>
                                </select>
                            </div>
                        </div>


                        <div class="col-md-2 col-4" id="date_picker">
                            <input type="date" value="" class="form-control" id="datepicker">
                        </div>


                        <div class="col-md-2 col-4" id="month_picker" >

                            <label for="datepicker5">Select Month</label>
                            <input type="text" class="form-control" name="datepicker" id="datepicker5" />
                           
                        </div>


                        <div class="col-md-2 col-4" id="year_picker" >
                            <div class="custom_select">
                                <select class="form-select select-nice" onchange="" id="year_yearPicker">
                                    <option selected>2022</option>
                                    <option>2021</option>
                                    <option>2023</option>
                                    <option>2024</option>
                                </select>
                            </div>
                        </div>




                        <div class="col-md-2 col-4" id="datewise_picker">
                            <label for="datepicker2">Start</label>
                            <input type="date" value="" class="form-control" id="datepicker2">
                            <label for="datepicker3">End</label>
                            <input type="date" value="" class="form-control" id="datepicker3">
                        </div>



                       





                        <div class="col-md-3 col-4">
                        
                                <!-- <a href="#" class="btn btn-primary" onclick="getReport()"><i class="text-muted material-icons md-post_add"></i>Create report</a> -->
                                <button class="btn btn-primary" onclick="getReport()"><i class="text-muted material-icons md-post_add"></i>Create report    </button>
                            
                        </div>
                    </div>
                </header>
                <div class="card-body">
                    <div class="table-responsive">
                        <div class="table-responsive">
                            <table class="table align-middle table-nowrap mb-0" id="example">
                                <thead class="table-light">
                                    <tr>
                                        
                                        <th class="align-middle" scope="col">Order ID</th>
                                        <th class="align-middle" scope="col">Billing Name</th>
                                        <th class="align-middle" scope="col">Date</th>
                                        <th class="align-middle" scope="col">Total</th>
                                        <th class="align-middle" scope="col">Payment Status</th>
                                        <th class="align-middle" scope="col">Payment Method</th>
                                        <th class="align-middle" scope="col">View Details</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <% orderList.forEach(function(item){ %>
                                
                                    <tr>
                                        <td><a href="#" class="fw-bold"><%= item._id %></a> </td>
                                        <td><%= item.userDetails.name %></td>
                                        <td><%= item.date.substring(0, 16) %></td>
                                        <td>$<%= item.totalAmount%></td>
                                        <% if (item.paymentStatus=="success"){ %>
                                        <td> <span class="badge badge-pill badge-soft-success"><%= item.paymentStatus%></span></td>
                                       <% }else{ %>
                                        <td> <span class="badge badge-pill badge-soft-danger"><%= item.paymentStatus%></span></td>
                                       <% } %>
                                        <td>  <i class="material-icons md-payment font-xxl text-muted mr-5"></i> <%= item.paymentMethod%> </td>
                                        <td> <a href="/admin/page-orders-detail.html/<%= item._id%>" class="btn btn-xs"> View details</a>  </td>
                                    </tr>

                                    <% })  %>
                                  
                                </tbody>
                            </table>
                        </div>
                    </div> <!-- table-responsive end// -->
                </div>
            </div>
            <!-- <div class="pagination-area mt-30 mb-50">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-start">
                        <li class="page-item active"><a class="page-link" href="#">01</a></li>
                        <li class="page-item"><a class="page-link" href="#">02</a></li>
                        <li class="page-item"><a class="page-link" href="#">03</a></li>
                        <li class="page-item"><a class="page-link dot" href="#">...</a></li>
                        <li class="page-item"><a class="page-link" href="#">16</a></li>
                        <li class="page-item"><a class="page-link" href="#"><i class="material-icons md-chevron_right"></i></a></li>
                    </ul>
                </nav>
            </div> -->
        </section> <!-- content-main end// -->
        <footer class="main-footer font-xs">
            <div class="row pb-30 pt-15">
                <div class="col-sm-6">
                    <script>
                    document.write(new Date().getFullYear())
                    </script> ©, Evara - HTML Ecommerce Template .
                </div>
                <div class="col-sm-6">
                    <div class="text-sm-end">
                        All rights reserved
                    </div>
                </div>
            </div>
        </footer>
    </main>
    <script src="/admin/assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="/admin/assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="/admin/assets/js/vendors/select2.min.js"></script>
    <script src="/admin/assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="/admin/assets/js/vendors/jquery.fullscreen.min.js"></script>
    <script src="/admin/assets/js/vendors/chart.js"></script>



    <script type="text/javascript" src="https://cdn.datatables.net/v/bs/jq-3.6.0/dt-1.13.1/datatables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.6/jspdf.plugin.autotable.min.js"></script>




    <!-- date picker  -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> -->
    <script src="https://netdna.bootstrapcdn.com/bootstrap/2.3.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/js/bootstrap-datepicker.min.js"></script>



    <!-- Main Script -->
    <script src="/admin/assets/js/main.js" type="text/javascript"></script>
    <script src="/admin/assets/js/custom-chart.js" type="text/javascript"></script>
    <script>

$(document).ready(function() {
    $('#example').DataTable( {
        dom: 'Bfrtip',
        buttons: [
             'excel', 'pdf', 'print'
        ]
    } );
} );


$('#date_picker').hide()
$('#month_picker').hide()
$('#year_picker').hide()
$('#datewise_picker').hide()

$("#datepicker5").datepicker( {
    format: "yyyy-mm",
    startView: "months", 
    minViewMode: "months"
});





    $.ajax({
        type:"GET",
        url:"/admin/total_revenue",
        success: function (response) {
            //response=JSON.parse(response)
            
            document.getElementById("totalRevenue1").innerHTML=response.totalRevenue;
            document.getElementById("totalOrder").innerHTML=response.count;

        },
        error: function (data) {
            alert('An error occurred.');
            console.log(data);
        },
    });





function reportMaker(){

    if($('#filterOption').val()=="Date Wise"){
        $('#date_picker').show()



        $('#datewise_picker').hide()
        $('#month_picker').hide()
        $('#year_picker').hide()

    } else if($('#filterOption').val()=="Month Wise"){
        $('#month_picker').show()



        $('#datewise_picker').hide()
        $('#year_picker').hide()
        $('#date_picker').hide()
            
    } else if($('#filterOption').val()=="Year Wise"){
        $('#year_picker').show()



        $('#month_picker').hide()
        $('#date_picker').hide()
        $('#datewise_picker').hide()
    } else if($('#filterOption').val()=="Date Filter"){
        $('#datewise_picker').show()
    

        $('#month_picker').hide()
        $('#date_picker').hide()
        $('#year_picker').hide()
    }else {


        $('#datewise_picker').hide()
        $('#month_picker').hide()
        $('#date_picker').hide()
        $('#year_picker').hide()

    }
}

function getReport(){

    if($('#filterOption').val()=="Today orders"){
        location.href="/admin/index.html/?method=today"
        

    }else if($('#filterOption').val()=="Date Wise"){

       let date = $('#datepicker').val() ;
        location.href="/admin/index.html/?method=date&date="+date
    }else if($('#filterOption').val()=="Month Wise"){

        let month = $('#datepicker5').val() ;


        // let year = $('#year_monthPicker').val() ;
        location.href="/admin/index.html/?method=month&month="+month
    } else if ($('#filterOption').val()=="Date Filter"){
        
        let startDate= $('#datepicker2').val()
        let endDate= $('#datepicker3').val()

        location.href="/admin/index.html/?method=dateFilter&startDate="+startDate+"&endDate="+endDate;

    }else {

        location.href="/admin/index.html/?method=today"


    }


return false;

}
                        
 </script>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load("current", {packages:["corechart"]});
  google.charts.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Category', 'Sales'],
      ['Men',     11],
      ['Woman',      2],
      ['Kids',  2]
    ]);

    var options = {
      title: 'Sales By Category',
      pieHole: 0.2,
    };

    var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
    chart.draw(data, options);
  }
</script>


</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:57 GMT -->
</html>